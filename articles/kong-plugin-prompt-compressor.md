---
title: "Kong ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ - AI Prompt Compressor"
emoji: "ğŸ¤–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["kong", "LLM"]
published: false
---

## ã¯ã˜ã‚ã«

ã¤ã„å…ˆæ—¥ã€Kong Gateway 3.11 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚

https://jp.konghq.com/blog/kong-gateway-3-11-release-20250714

Datakit ã¨å‘¼ã°ã‚Œã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼ã‚’æŸ”è»Ÿã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹æ–°æ©Ÿèƒ½ã‚„ã€AI é–¢é€£ã§ã„ãã¤ã‹ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒã‚ã‚Šã¾ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ãã®ä¸­ã§ã‚‚ã€AI Prompt Compressor ã¨å‘¼ã°ã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦è§£èª¬ã—ã¾ã™ã€‚

:::message
æœ¬è¨˜äº‹ã®å†…å®¹ã¯ã€Kong Gateway Enterprise Edition ã®ã¿ã§å®Ÿè¡Œå¯èƒ½ã§ã™ã€‚npx 
:::

## AI Prompt Compressor

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®åœ§ç¸®

LLM ã‹ã‚‰æœŸå¾…ã™ã‚‹å‡ºåŠ›ã‚’å¾—ã‚‹ãŸã‚ã«ã€è©³ç´°ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¨˜è¿°ã—ãŸã‚ŠçŸ¥è­˜æƒ…å ±ã‚’è£œå®Œã—ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«åŸ‹ã‚è¾¼ã‚€ã“ã¨ã¯ LLM æ´»ç”¨ã«ãŠã‘ã‚‹æœ‰åãªæ‰‹æ³•ã§ã™ã€‚ä¸€æ–¹ã§é•·æ–‡ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä¸ãˆã‚‹ã¨ã€GPU ãƒ¡ãƒ¢ãƒªã®ä½¿ç”¨é‡ã¨æ¨è«–ã‚³ã‚¹ãƒˆãŒå¢—åŠ ã—ã¾ã™ã€‚ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®æ‰‹æ³•ã®ä¸€ã¤ãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆåœ§ç¸®ã§ã™ã€‚ç°¡å˜ãªä¾‹ã¯ã€ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

```txt
# ORIGINAL
I would like to know how many people currently live in New York City?

# COMPRESSED
What is the population of New York City?
```

è¦‹æ¯”ã¹ã¦ã„ãŸã ãã¨ã€ã©ã¡ã‚‰ã‚‚æ—¥æœ¬èªè¨³çš„ã«ã¯ã€Œãƒ‹ãƒ¥ãƒ¼ãƒ¨ãƒ¼ã‚¯ã®äººå£ã¯ãªã‚“ã§ã™ã‹ï¼Ÿã€ã«ãªã‚‹ã¨æ€ã„ã¾ã™ãŒã€COMPRESSED ã®æ–¹ã¯ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆæ–‡å­—ï¼‰æ•°ãŒå°‘ãªã„ã“ã¨ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã“ã®ã‚ˆã†ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ„å‘³ã‚’å¤±ã‚ãªã„ã‚ˆã†ã«ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å°‘ãªãã™ã‚‹å°‘ãªãã™ã‚‹æŠ€è¡“ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆåœ§ç¸®ã¨å‘¼ã³ã¾ã™ã€‚

### Kong Gateway ã¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆåœ§ç¸®

ä¸Šè¨˜ã§èª¬æ˜ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆåœ§ç¸®ã§ã™ãŒã€Kong Gateway ã§ã¯ AI Prompt Compressor ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚ãã®ä»–ã® AI é–¢é€£ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã„ãã¤ã‹ä½¿ã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚

```mermaid
sequenceDiagram

    API Client ->> Kong Gateway: API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    Kong Gateway ->> AI RAG Injector: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å‘¼ã³å‡ºã—
    AI RAG Injector ->> AI RAG Injector: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå–å¾—
    AI RAG Injector ->> AI Prompt Compressor: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å‘¼ã³å‡ºã—
    AI Prompt Compressor ->> AI Prompt Compressor: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆåœ§ç¸®
    AI Prompt Compressor ->> AI Proxy: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å‘¼ã³å‡ºã—
    AI Proxy ->> LLM API (e.g. OpenAI): LLM API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    LLM API (e.g. OpenAI) ->> API Client: LLM ã®å‡ºåŠ›
```

